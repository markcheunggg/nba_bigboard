<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Big Board</title>
    <link rel="stylesheet" href="index.css" />
</head>


<body>
    <div id="container">
        <img id="board_image" src="img/cartoon_board.jpg"><br>
        <div class="big-board">
            <div id="1" class="drop-zone"> </div>
            <div id="2" class="drop-zone"> </div>
            <div id="3" class="drop-zone"> </div>
            <div id="4" class="drop-zone"> </div>
            <div id="5" class="drop-zone"> </div>
            <div id="6" class="drop-zone"> </div>
            <div id="7" class="drop-zone"> </div>
            <div id="8" class="drop-zone"> </div>
            <div id="9" class="drop-zone"> </div>
            <div id="10" class="drop-zone"> </div>
            <div id="11" class="drop-zone"> </div>
            <div id="12" class="drop-zone"> </div>
            <div id="13" class="drop-zone"> </div>
            <div id="14" class="drop-zone"> </div>
            <div id="15" class="drop-zone"> </div>
            <div id="16" class="drop-zone"> </div>
            <div id="17" class="drop-zone"> </div>
            <div id="18" class="drop-zone"> </div>
            <div id="19" class="drop-zone"> </div>
            <div id="20" class="drop-zone"> </div>
            <div id="21" class="drop-zone"> </div>
            <div id="22" class="drop-zone"> </div>
            <div id="23" class="drop-zone"> </div>
            <div id="24" class="drop-zone"> </div>
            <div id="25" class="drop-zone"> </div>
            <div id="26" class="drop-zone"> </div>
            <div id="27" class="drop-zone"> </div>
            <div id="28" class="drop-zone"> </div>
            <div id="29" class="drop-zone"> </div>
            <div id="30" class="drop-zone"> </div>
        </div>
    </div>

    <div id="bottom-bar">
        <h2>Prospect Bank</h2>
        <input type="text" id="prospect_search" onkeyup="nameSearch()" placeholder="Search for name...">
        <div class="grid-container" id="prospect-bank">
            <div draggable="true" id="CadeCunningham" class="gridElement draggable" onclick="create_modal(0)"> Cade
                Cunningham </div>
            <div draggable="true" id="EvanMobley" class="gridElement draggable" onclick="create_modal(1)">Evan Mobley
            </div>
            <div draggable="true" id="JalenSuggs" class="gridElement draggable" onclick="create_modal(2)">Jalen Suggs
            </div>
            <div draggable="true" id="JalenGreen" class="gridElement draggable">Jalen Green</div>
            <div draggable="true" id="JonathanKuminga" class="gridElement draggable">Jonathan Kuminga</div>
            <div draggable="true" id="ScottieBarnes" class="gridElement draggable">Scottie Barnes</div>
            <div draggable="true" id="KeonJohnson" class="gridElement draggable">Keon Johnson</div>
            <div draggable="true" id="MosesMoody" class="gridElement draggable">Moses Moody</div>
            <div draggable="true" id="DavionMitchell" class="gridElement draggable">Davion Mitchell</div>
            <div draggable="true" id="JoshGiddey" class="gridElement draggable">Josh Giddey</div>
            <div draggable="true" id="FranzWagner" class="gridElement draggable">Franz Wagner</div>
            <div draggable="true" id="KaiJones" class="gridElement draggable">Kai Jones</div>
            <div draggable="true" id="JamesBouknight" class="gridElement draggable">James Bouknight</div>
            <div draggable="true" id="AlperenSengun" class="gridElement draggable">Alperen Sengun</div>
            <div draggable="true" id="UsmanGaruba" class="gridElement draggable">Usman Garuba</div>
            <div draggable="true" id="JadenSpringer" class="gridElement draggable">Jaden Springer</div>
            <div draggable="true" id="ZiaireWilliams" class="gridElement draggable">Ziaire Williams</div>
            <div draggable="true" id="JalenJohnson" class="gridElement draggable">Jalen Johnson</div>
            <div draggable="true" id="CamThomas" class="gridElement draggable">Cam Thomas</div>
            <div draggable="true" id="CoreyKispert" class="gridElement draggable">Corey Kispert</div>
            
        </div>
        <button class="openbtn" onclick="openNav()">&#9776; Open Sidebar</button>
        <!--Sidebar-->
        <div id="mySidebar" class="sidebar">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <h1 id="name" style="color: white"></h1>
            <h2 id="team" style="color: white"></h2>
            <p id="stats" style="color: white">

            </p>
        </div>
    
    </div>
    

    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content" id='modal-content'>
            <span class="close" onclick="modal.style.display = 'none';">&times;</span>
            <p id='modal-text'>Some text in the Modal..</p>
        </div>

    </div>
    <script id="remove_js" src="index.js"></script>
    <script src="stats.js"></script>
    <script>
        var modal = document.getElementById("myModal");
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        /*
        This is basically all the drag-and-drop stuff:
    
        */
        const draggableElements = [...document.querySelectorAll(".draggable")];
        draggableElements.forEach(function (item) {
            //tbh, i just copied this from a tutorial.
            //idk what it does exactly, but I think it identifies all the IDs of the draggable elements. 
            item.addEventListener("dragstart", e => {
                e.dataTransfer.setData('text/plain', item.id)
            })
        });


        for (const dropZone of document.querySelectorAll(".drop-zone")) {


            // When draggable element is over a drop zone.
            dropZone.addEventListener("dragover", e => {
                e.preventDefault();
                //dropZone.classList.add("drop-zone--over");
            });

            dropZone.addEventListener("dragleave", e => {
                //dropZone.classList.remove("drop-zone--over");
                e.preventDefault();
                const leftElement = document.getElementById(e.target.id);

                /*
                This code removes an existing player from the big board if you drag them out of their drop zone. 
                It's obsolete cause of the "red-X" button, but it's here just in case we want to
                reimplement it.
        
                leftElement.addEventListener("dragend", e=>{
                    e.preventDefault();
        
                    if (leftElement.classList.contains("dropped")) {
                        
                        leftElement.classList.remove("dropped");
                        leftElement.classList.add("gridElement");
                        var grid = document.getElementById("prospect-bank")
        
                        if (dropZone.contains(leftElement)){
                            dropZone.removeChild(leftElement)
                        }
                        console.log(dropZone.childNodes)
                        console.log("hello")
        
                       
                        grid.appendChild(leftElement)
                    }
        
                    */
            })

            //When draggable element is dropped onto a drop zone.
            dropZone.addEventListener("drop", e => {
                e.preventDefault();
                const droppedElementId = e.dataTransfer.getData("text/plain");
                const droppedElement = document.getElementById(droppedElementId);

                if (dropZone.childNodes.length < 2) {
                    var grid = document.getElementById("prospect-bank")

                    if (grid.contains(droppedElement)) {
                        grid.removeChild(droppedElement)
                    }

                    dropZone.appendChild(droppedElement);
                    droppedElement.classList.remove("gridElement");
                    droppedElement.classList.add("dropped");


                    var removeButton = document.createElement("INPUT");
                    removeButton.setAttribute("src", "https://www.freeiconspng.com/thumbs/x-png/x-png-18.png")
                    removeButton.setAttribute("onclick", "remove_prospect(this)")
                    removeButton.setAttribute("type", "image")
                    removeButton.setAttribute("class", "removeButton")


                    console.log(droppedElement.children)
                    if (droppedElement.children.length == 0) {
                        droppedElement.appendChild(removeButton)
                    }



                    //dropZone.classList.remove("drop-zone--over");
                }

            });
        }

        //sidebar stuff
        function openNav() {
            
            
        }

        /* Set the width of the sidebar to 0 and the left margin of the page content to 0 */
        function closeNav() {
            document.getElementById("mySidebar").style.width = "0";
            //document.getElementById("bottom-bar").style.marginLeft = "0";
        }


    </script>


</body>

</html>