<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Big Board</title>
    <link rel="stylesheet" href="index.css" />
</head>


<body>

    <div id="container">
        <img id ="board_image" src="img/cartoon_board.jpg"><br>
        <div class="big-board">
            <div id="1" class="drop-zone"> </div>
            <div id="2" class="drop-zone"> </div>
            <div id="3" class="drop-zone"> </div>
            <div id="4" class="drop-zone"> </div>
            <div id="5" class="drop-zone"> </div>
            <div id="6" class="drop-zone"> </div>
            <div id="7" class="drop-zone"> </div>
            <div id="8" class="drop-zone"> </div>
            <div id="9" class="drop-zone"> </div>
            <div id="10" class="drop-zone"> </div>
            <div id="11" class="drop-zone"> </div>
            <div id="12" class="drop-zone"> </div>
            <div id="13" class="drop-zone"> </div>
            <div id="14" class="drop-zone"> </div>
            <div id="15" class="drop-zone"> </div>
            <div id="16" class="drop-zone"> </div>
            <div id="17" class="drop-zone"> </div>
            <div id="18" class="drop-zone"> </div>
            <div id="19" class="drop-zone"> </div>
            <div id="20" class="drop-zone"> </div>
            <div id="21" class="drop-zone"> </div>
            <div id="22" class="drop-zone"> </div>
            <div id="23" class="drop-zone"> </div>
            <div id="24" class="drop-zone"> </div>
            <div id="25" class="drop-zone"> </div>
            <div id="26" class="drop-zone"> </div>
            <div id="27" class="drop-zone"> </div>
            <div id="28" class="drop-zone"> </div>
            <div id="29" class="drop-zone"> </div>
            <div id="30" class="drop-zone"> </div>

        </div>
    </div>
    <h2>Prospect Bank</h2>
    <div class="grid-container" , id="prospect-bank">
        <div draggable="true" id="CadeCunningham" onclick='create_modal(0)' class="gridElement draggable"> Cade Cunningham </div>
        <div draggable="true" id="EvanMobley" onclick='create_modal(1)' class="gridElement draggable">Evan Mobley</div>
        <div draggable="true" id="JalenSuggs" onclick='create_modal(2)' class="gridElement draggable">Jalen Suggs</div>
        <div draggable="true" id="JalenGreen" onclick='create_modal(3)' class="gridElement draggable">Jalen Green</div>
        <div draggable="true" id="JonathanKuminga" onclick='create_modal(4)' class="gridElement draggable">Jonathan Kuminga</div>
    </div>
    

    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content" id='modal-content'>
            <span class="close" onclick="modal.style.display = 'none';">&times;</span>
            <p id='modal-text'>Some text in the Modal..</p>
        </div>

    </div>
    <script id="remove_js" src="index.js"></script>
    <script src="stats.js"></script>
    <script>
        var modal = document.getElementById("myModal");
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        /*
        This is basically all the drag-and-drop stuff:
    
        */
        const draggableElements = [...document.querySelectorAll(".draggable")];
        draggableElements.forEach(function (item) {
            //tbh, i just copied this from a tutorial.
            //idk what it does exactly, but I think it identifies all the IDs of the draggable elements. 
            item.addEventListener("dragstart", e => {
                e.dataTransfer.setData('text/plain', item.id)
            })
        });


        for (const dropZone of document.querySelectorAll(".drop-zone")) {


            // When draggable element is over a drop zone.
            dropZone.addEventListener("dragover", e => {
                e.preventDefault();
                //dropZone.classList.add("drop-zone--over");
            });

            dropZone.addEventListener("dragleave", e => {
                //dropZone.classList.remove("drop-zone--over");
                e.preventDefault();
                const leftElement = document.getElementById(e.target.id);

                /*
                This code removes an existing player from the big board if you drag them out of their drop zone. 
                It's obsolete cause of the "red-X" button, but it's here just in case we want to
                reimplement it.
        
                leftElement.addEventListener("dragend", e=>{
                    e.preventDefault();
        
                    if (leftElement.classList.contains("dropped")) {
                        
                        leftElement.classList.remove("dropped");
                        leftElement.classList.add("gridElement");
                        var grid = document.getElementById("prospect-bank")
        
                        if (dropZone.contains(leftElement)){
                            dropZone.removeChild(leftElement)
                        }
                        console.log(dropZone.childNodes)
                        console.log("hello")
        
                       
                        grid.appendChild(leftElement)
                    }
        
                    */
            })

            //When draggable element is dropped onto a drop zone.
            dropZone.addEventListener("drop", e => {
                e.preventDefault();
                const droppedElementId = e.dataTransfer.getData("text/plain");
                const droppedElement = document.getElementById(droppedElementId);

                if (dropZone.childNodes.length < 2) {
                    var grid = document.getElementById("prospect-bank")

                    if (grid.contains(droppedElement)) {
                        grid.removeChild(droppedElement)
                    }

                    dropZone.appendChild(droppedElement);
                    droppedElement.classList.remove("gridElement");
                    droppedElement.classList.add("dropped");


                    var removeButton = document.createElement("INPUT");
                    removeButton.setAttribute("src", "https://www.freeiconspng.com/thumbs/x-png/x-png-18.png")
                    removeButton.setAttribute("onclick", "remove_prospect(this)")
                    removeButton.setAttribute("type", "image")
                    removeButton.setAttribute("class", "removeButton")


                    console.log(droppedElement.children)
                    if (droppedElement.children.length == 0){
                        droppedElement.appendChild(removeButton)
                    }



                    //dropZone.classList.remove("drop-zone--over");
                }

            });
        }




    </script>


</body>

</html>